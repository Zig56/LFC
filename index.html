<!DOCTYPE html>
<html lang="ru">
<head>
<link rel="icon" type="image/webp" href="https://cdn.poedb.tw/image/Art/2DArt/minimap/player/HarvestPortal.webp">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>L.F.C</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 100%);
      min-height: 100vh;
      color: #eee;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      line-height: 1.6;
      padding: 20px;
      background-attachment: fixed;
    }

    .container {
      max-width: 800px;
      margin: 0 auto;
      background: rgba(30, 30, 30, 0.95);
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3), 0 0 20px rgba(255, 215, 0, 0.1);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 215, 0, 0.2);
      animation: fadeIn 0.8s ease-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }

    h1 {
      text-align: center;
      font-size: 2.2rem;
      background: linear-gradient(45deg, #ffd700, #ffed4e, #ffd700);
      background-size: 200% 200%;
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 30px;
      animation: gradientShift 3s ease-in-out infinite;
      text-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
    }

    @keyframes gradientShift {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }

    .section {
      background: rgba(40, 40, 40, 0.7);
      border-radius: 15px;
      padding: 25px;
      margin-bottom: 25px;
      border: 1px solid rgba(255, 215, 0, 0.1);
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .section::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 2px;
      background: linear-gradient(90deg, transparent, #ffd700, transparent);
      transition: left 0.5s ease;
    }

    .section:hover::before {
      left: 100%;
    }

    .section:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(255, 215, 0, 0.2);
      border-color: rgba(255, 215, 0, 0.3);
    }

    h3 {
      color: #ffd700;
      font-size: 1.4rem;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .input-group {
      margin-bottom: 20px;
    }

    label {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 8px;
      font-weight: 500;
      color: #ccc;
      transition: color 0.3s ease;
    }

    .currency-icon {
      width: 20px;
      height: 20px;
      filter: drop-shadow(0 0 3px rgba(255, 215, 0, 0.5));
      transition: filter 0.3s ease;
    }

    input[type="number"] {
      width: 100%;
      background: linear-gradient(135deg, #2a2a2a, #3a3a3a);
      color: #fff;
      border: 2px solid #444;
      border-radius: 10px;
      padding: 12px 16px;
      font-size: 1rem;
      transition: all 0.3s ease;
      outline: none;
    }

    input[type="number"]:focus {
      border-color: #ffd700;
      box-shadow: 0 0 15px rgba(255, 215, 0, 0.3);
      background: linear-gradient(135deg, #3a3a3a, #4a4a4a);
    }

    input[type="number"]:hover {
      border-color: #666;
    }

    input[readonly] {
      background: rgba(80, 80, 80, 0.5) !important;
      cursor: not-allowed;
    }

    .radio-group {
      display: flex;
      gap: 20px;
      margin: 15px 0;
    }

    .radio-option {
      display: flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
      padding: 10px 15px;
      border-radius: 25px;
      background: rgba(60, 60, 60, 0.5);
      border: 2px solid transparent;
      transition: all 0.3s ease;
    }

    .radio-option:hover {
      background: rgba(80, 80, 80, 0.7);
      border-color: rgba(255, 215, 0, 0.3);
    }

    input[type="radio"] {
      appearance: none;
      width: 18px;
      height: 18px;
      border: 2px solid #666;
      border-radius: 50%;
      position: relative;
      cursor: pointer;
    }

    input[type="radio"]:checked {
      border-color: #ffd700;
      background: radial-gradient(circle, #ffd700 30%, transparent 40%);
    }

    input[type="radio"]:checked::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: #ffd700;
    }

    .result {
      background: linear-gradient(135deg, rgba(50, 50, 50, 0.8), rgba(30, 30, 30, 0.9));
      border-radius: 15px;
      padding: 25px;
      margin-top: 25px;
      border: 2px solid rgba(255, 215, 0, 0.2);
      min-height: 100px;
      animation: slideUp 0.5s ease-out;
    }

    @keyframes slideUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .result h3 {
      margin-bottom: 15px;
      color: #ffd700;
    }

    .result-content {
      font-size: 1.1rem;
      line-height: 1.8;
    }

    .success {
      color: #4ade80;
      font-weight: bold;
    }

    .warning {
      color: #fbbf24;
      font-weight: bold;
    }

    .highlight {
      color: #ffd700;
      font-weight: bold;
      text-shadow: 0 0 5px rgba(255, 215, 0, 0.3);
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
    }

    .auto-calc-hint {
      background: rgba(255, 215, 0, 0.1);
      border: 1px solid rgba(255, 215, 0, 0.3);
      border-radius: 10px;
      padding: 15px;
      margin-bottom: 20px;
      text-align: center;
      color: #ffd700;
      font-style: italic;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 0.7; }
      50% { opacity: 1; }
    }

    @media (max-width: 768px) {
      .container {
        padding: 20px;
        margin: 10px;
      }
      
      h1 {
        font-size: 1.8rem;
      }
      
      .radio-group {
        flex-direction: column;
        gap: 10px;
      }
    }

    .floating-particles {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: -1;
    }

    .particle {
      position: absolute;
      background: radial-gradient(circle, rgba(255, 215, 0, 0.3) 0%, transparent 70%);
      border-radius: 50%;
      animation: float 6s ease-in-out infinite;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0px) rotate(0deg); }
      50% { transform: translateY(-20px) rotate(180deg); }
    }
  </style>
</head>
<body>
  <div class="floating-particles"></div>
  
  <div class="container">
    <h1>üß™ Lifeforce Flip Calculator</h1>

    <div class="auto-calc-hint">
      ‚ö° –†–∞—Å—á–µ—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–∏ –ø–æ–ª–µ–π
    </div>

    <div class="section">
      <h3>üí∞ –ú–æ–π –±—é–¥–∂–µ—Ç</h3>
      <div class="grid">
        <div class="input-group">
          <label>
            <img src="https://cdn.poedb.tw/image/Art/2DItems/Currency/CurrencyRerollRare.webp" class="currency-icon">
            –°–∫–æ–ª—å–∫–æ —Ö–∞–æ—Å–æ–≤:
          </label>
          <input type="number" id="chaos" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ">
        </div>

        <div class="input-group">
          <label>
            <img src="https://cdn.poedb.tw/image/Art/2DItems/Currency/CurrencyModValues.webp" class="currency-icon">
            –°–∫–æ–ª—å–∫–æ –¥–∏–≤–∞–Ω–æ–≤:
          </label>
          <input type="number" id="divines" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ">
        </div>

        <div class="input-group">
          <label>‚öñÔ∏è –ö—É—Ä—Å 1 –¥–∏–≤–∞–Ω–∞ –≤ —Ö–∞–æ—Å–∞—Ö:</label>
          <input type="number" id="divRate" value="100" placeholder="–¢–µ–∫—É—â–∏–π –∫—É—Ä—Å">
        </div>
      </div>
    </div>

    <div class="section">
      <h3>‚öôÔ∏è –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–¥–µ–ª–∫–∏</h3>
      <div class="grid">
        <div class="input-group">
          <label>
            <img src="https://cdn.poedb.tw/image/Art/2DItems/Currency/Harvest/VividLifeforce.webp" class="currency-icon">
            –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ —Ä—ã–Ω–∫–∞:
          </label>
          <input type="number" id="juiceAmount" placeholder="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∂–∏–∂–∏">
        </div>

        <div class="input-group">
          <label>
            <img src="https://cdn.poedb.tw/image/Art/2DItems/Currency/CurrencyRerollRare.webp" class="currency-icon">
            –¶–µ–Ω–∞ –∑–∞ 1 —Å—Ç–∞–∫:
          </label>
          <input type="number" id="juiceCost" placeholder="–¶–µ–Ω–∞ –ø–æ–∫—É–ø–∫–∏ –≤ —Ö–∞–æ—Å–∞—Ö">
        </div>

        <div class="input-group">
          <label>üì¶ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç–∞–∫–æ–≤:</label>
          <input type="number" id="stackCount" placeholder="–°–∫–æ–ª—å–∫–æ —Å—Ç–∞–∫–æ–≤ –ø–æ–∫—É–ø–∞—é" min="1" value="1">
        </div>

        <div class="input-group">
          <label>üí∞ –û–±—â–∞—è —Å—É–º–º–∞ –ø–æ–∫—É–ø–∫–∏:</label>
          <input type="number" id="totalCost" placeholder="–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å—Å—á–∏—Ç–∞–µ—Ç—Å—è" readonly>
        </div>

        <div class="input-group">
          <label>üì¶ –ü—Ä–æ–¥–∞—é: # –∂–∏–∂–∏ –∑–∞ 1 –¥–∏–≤–∞–Ω</label>
          <input type="number" id="juicePerDivine" placeholder="–ñ–∏–∂–∏ –∑–∞ –¥–∏–≤–∞–Ω">
        </div>
      </div>
    </div>

    <div class="section">
      <h3>üéØ –¶–µ–ª—å –ø—Ä–∏–±—ã–ª–∏</h3>
      <div class="radio-group">
        <label class="radio-option">
          <input type="radio" name="profitType" value="chaos" checked>
          <span>–•–∞–æ—Å—ã</span>
        </label>
        <label class="radio-option">
          <input type="radio" name="profitType" value="divine">
          <span>–î–∏–≤–∞–Ω—ã</span>
        </label>
      </div>

      <div class="input-group">
        <label id="chaosTargetLabel">üíé –ñ–µ–ª–∞–µ–º–∞—è –ø—Ä–∏–±—ã–ª—å –≤ —Ö–∞–æ—Å–∞—Ö:</label>
        <input type="number" id="chaosTarget" placeholder="–¶–µ–ª–µ–≤–∞—è –ø—Ä–∏–±—ã–ª—å">

        <label id="divineTargetLabel" style="display:none;">üíé –ñ–µ–ª–∞–µ–º–∞—è –ø—Ä–∏–±—ã–ª—å –≤ divines:</label>
        <input type="number" id="divineTarget" style="display:none;" placeholder="–¶–µ–ª–µ–≤–∞—è –ø—Ä–∏–±—ã–ª—å">
      </div>
    </div>

    <div class="result">
      <h3>üìä –†–µ–∑—É–ª—å—Ç–∞—Ç –∞–Ω–∞–ª–∏–∑–∞:</h3>
      <div id="result" class="result-content">
        –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª—è –≤—ã—à–µ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞ –ø—Ä–∏–±—ã–ª—å–Ω–æ—Å—Ç–∏ —Å–¥–µ–ª–∫–∏...
      </div>
    </div>
  </div>

  <script>
    // –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞–≤–∞—é—â–∏—Ö —á–∞—Å—Ç–∏—Ü
    function createParticles() {
      const container = document.querySelector('.floating-particles');
      for (let i = 0; i < 15; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        particle.style.left = Math.random() * 100 + '%';
        particle.style.top = Math.random() * 100 + '%';
        particle.style.width = (Math.random() * 4 + 2) + 'px';
        particle.style.height = particle.style.width;
        particle.style.animationDelay = Math.random() * 6 + 's';
        particle.style.animationDuration = (Math.random() * 4 + 4) + 's';
        container.appendChild(particle);
      }
    }

    createParticles();

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞ –æ–±—â–µ–π —Å—É–º–º—ã
    function updateTotalCost() {
      const juiceCost = parseFloat(document.getElementById("juiceCost").value) || 0;
      const stackCount = parseFloat(document.getElementById("stackCount").value) || 1;
      const totalCost = juiceCost * stackCount;
      
      document.getElementById("totalCost").value = totalCost > 0 ? totalCost : '';
    }

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞ –æ–±—â–µ–π —Å—É–º–º—ã
    document.getElementById("juiceCost").addEventListener('input', updateTotalCost);
    document.getElementById("stackCount").addEventListener('input', updateTotalCost);

    // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–∏–ø–∞ –ø—Ä–∏–±—ã–ª–∏
    document.querySelectorAll('input[name="profitType"]').forEach((radio) => {
      radio.addEventListener('change', function() {
        const chaosElements = [
          document.getElementById('chaosTargetLabel'),
          document.getElementById('chaosTarget')
        ];
        const divineElements = [
          document.getElementById('divineTargetLabel'),
          document.getElementById('divineTarget')
        ];

        if (this.value === 'chaos') {
          chaosElements.forEach(el => el.style.display = el.tagName === 'LABEL' ? 'flex' : 'block');
          divineElements.forEach(el => el.style.display = 'none');
        } else {
          chaosElements.forEach(el => el.style.display = 'none');
          divineElements.forEach(el => el.style.display = el.tagName === 'LABEL' ? 'flex' : 'block');
        }

        // –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º –ø—Ä–∏ —Å–º–µ–Ω–µ —Ç–∏–ø–∞ –ø—Ä–∏–±—ã–ª–∏
        calculate();
      });
    });

    function calculate() {
      const chaos = parseFloat(document.getElementById("chaos").value) || 0;
      const divines = parseFloat(document.getElementById("divines").value) || 0;
      const divRate = parseFloat(document.getElementById("divRate").value) || 205;
      const juiceAmount = parseFloat(document.getElementById("juiceAmount").value) || 0;
      const juiceCost = parseFloat(document.getElementById("juiceCost").value) || 0;
      const stackCount = parseFloat(document.getElementById("stackCount").value) || 1;
      const totalCost = juiceCost * stackCount;
      const totalJuiceAmount = juiceAmount * stackCount;
      const juicePerDivine = parseFloat(document.getElementById("juicePerDivine").value) || 1;

      // –ï—Å–ª–∏ –Ω–µ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–¥—Å–∫–∞–∑–∫—É
      if (juiceAmount <= 0 || juiceCost <= 0 || stackCount <= 0 || juicePerDivine <= 0 || divRate <= 0) {
        document.getElementById("result").innerHTML = 
          `<div style="color: #ccc; font-style: italic;">–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞...</div>`;
        return;
      }

      const totalChaos = chaos + (divines * divRate);

      const profitType = document.querySelector('input[name="profitType"]:checked').value;
      const chaosTarget = profitType === 'chaos' 
        ? parseFloat(document.getElementById("chaosTarget").value) || 0 
        : (parseFloat(document.getElementById("divineTarget").value) || 0) * divRate;

      const divineReceived = Math.floor(totalJuiceAmount / juicePerDivine);
      const chaosReceived = divineReceived * divRate;
      const cleanProfit = chaosReceived - totalCost;
      const leftoverJuice = totalJuiceAmount - (divineReceived * juicePerDivine);
      const profitPercentage = totalCost > 0 ? ((cleanProfit / totalCost) * 100).toFixed(1) : 0;

      let result = `
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 20px;">
          <div>üí∞ <strong>–û–±—â–∏–µ –∑–∞—Ç—Ä–∞—Ç—ã:</strong><br><span class="highlight">${totalCost}</span> —Ö–∞–æ—Å–æ–≤</div>
          <div>üì¶ <strong>–í—Å–µ–≥–æ –∂–∏–∂–∏:</strong><br><span class="highlight">${totalJuiceAmount}</span> –µ–¥.</div>
          <div>üìà <strong>–ß–∏—Å—Ç–∞—è –ø—Ä–∏–±—ã–ª—å:</strong><br><span class="highlight">${cleanProfit}</span> —Ö–∞–æ—Å–æ–≤</div>
          <div>üìä <strong>–†–µ–Ω—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å:</strong><br><span class="highlight">${profitPercentage}%</span></div>
          <div>üéÅ <strong>–ü–æ–ª—É—á—É –¥–∏–≤–∞–Ω–æ–≤:</strong><br><span class="highlight">${divineReceived}</span> —à—Ç.</div>
          <div>üì¶ <strong>–û—Å—Ç–∞—Ç–æ–∫ –∂–∏–∂–∏:</strong><br><span class="highlight">${leftoverJuice}</span> –µ–¥.</div>
        </div>
      `;

      if (cleanProfit >= chaosTarget && chaosTarget > 0) {
        result += `<div class="success">üèÜ –ü–æ–∑–¥—Ä–∞–≤–ª—è—é! –¶–µ–ª—å –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–∞!</div>`;
      } else if (chaosTarget > 0) {
        const missing = chaosTarget - cleanProfit;
        const extraDivinesNeeded = Math.ceil(missing / divRate);
        const extraJuiceNeeded = extraDivinesNeeded * juicePerDivine;
        const extraCost = ((extraJuiceNeeded / totalJuiceAmount) * totalCost).toFixed(0);
        
        result += `
          <div class="warning">‚ö†Ô∏è –¶–µ–ª—å –ø—Ä–∏–±—ã–ª–∏ –Ω–µ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–∞</div>
          <div style="margin-top: 15px;">
            <strong>üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:</strong><br>
            ‚Ä¢ –î–æ–∫—É–ø–∏—Ç—å <span class="highlight">${extraJuiceNeeded}</span> –∂–∏–∂–∏<br>
            ‚Ä¢ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞—Ç—Ä–∞—Ç—ã: <span class="highlight">${extraCost}</span> —Ö–∞–æ—Å–æ–≤<br>
            ‚Ä¢ –≠—Ç–æ –¥–∞—Å—Ç –µ—â–µ <span class="highlight">${extraDivinesNeeded}</span> –¥–∏–≤–∞–Ω–æ–≤
          </div>
        `;
      }

      if (totalChaos < totalCost) {
        result += `<div class="warning">üí∏ –í–Ω–∏–º–∞–Ω–∏–µ! –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –¥–ª—è –ø–æ–∫—É–ø–∫–∏. –ù—É–∂–Ω–æ –µ—â–µ <span class="highlight">${totalCost - totalChaos}</span> —Ö–∞–æ—Å–æ–≤</div>`;
      }

      document.getElementById("result").innerHTML = result;
    }

    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç –ø—Ä–∏ –≤–≤–æ–¥–µ –ª—é–±—ã—Ö –¥–∞–Ω–Ω—ã—Ö
    document.querySelectorAll('input[type="number"], input[type="radio"]').forEach(input => {
      input.addEventListener('input', calculate);
      input.addEventListener('change', calculate);
    });

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    document.addEventListener('DOMContentLoaded', calculate);
  </script>
</body>
</html>
